(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{113:function(e,t,a){},116:function(e,t,a){},118:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a(0),c=a.n(s),i=a(15),r=a.n(i),o=a(10),l=a(11),d=a(13),u=a(12),h=(a(79),a(80),a(18)),m=a.n(h),p=a(27),j=(a(82),a(36)),b=a(37),g=(a(87),a(43)),f=a.n(g),x=(a(95),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){f.a.setAppElement("body")}},{key:"render",value:function(){var e=this;return Object(n.jsxs)(f.a,{isOpen:this.props.showModal,portalClassName:"modal",children:[Object(n.jsx)("img",{src:this.props.image,className:"expanded-img"}),Object(n.jsx)("button",{onClick:function(){return e.props.closeModal()},className:"close-button",children:"Close"})]})}}]),a}(c.a.Component)),O=a(28),v=a.n(O),y="http://localhost:5000",k=v.a.create({withCredentials:!0}),I={user:{setName:function(e){return k.post("".concat(y,"/name"),{name:e})}},analytics:{logAction:function(e,t,a){return k.post("".concat(y,"/user-event"),{type:e,message:t,details:a})}},search:{getItems:function(e,t){return v.a.get("https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=522c1f9009ca3609bcbaf08545f067ad&tags=".concat(e,"&tag_mode=any&per_page=").concat(20,"&format=json&nojsoncallback=1&page=").concat(t))}}},N=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleCloseModal=function(){n.setState({showExpandModal:!1})},n.state={rotation:0,showExpandModal:!1},n}return Object(l.a)(a,[{key:"urlFromDto",value:function(e){return"https://farm".concat(e.farm,".staticflickr.com/").concat(e.server,"/").concat(e.id,"_").concat(e.secret,".jpg")}},{key:"deleteImage",value:function(){var e=this.props.dto.id;this.props.handleDelete(e)}},{key:"expandImage",value:function(){this.setState({showExpandModal:!0}),I.analytics.logAction("expand image","User expanded an image","Image Id: ".concat(this.props.dto.id))}},{key:"rotateImage",value:function(){var e=90+this.state.rotation;this.setState({rotation:e}),I.analytics.logAction("rotate","User rotated an image","Image Id: ".concat(this.props.dto.id))}},{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{className:"image-root",style:{border:"1px solid white",justifyContent:"center",alignItems:"center",backgroundImage:"url(".concat(this.urlFromDto(this.props.dto),")"),backgroundSize:"cover",backgroundPosition:"50%",transform:"rotate(".concat(this.state.rotation,"deg)")},children:[Object(n.jsxs)("div",{className:"image-icon-section",children:[Object(n.jsx)(j.a,{icon:b.b,className:"image-icon",name:"sync-alt",title:"rotate",onClick:function(){return e.rotateImage()}}),Object(n.jsx)(j.a,{icon:b.c,className:"image-icon",name:"trash-alt",title:"delete",onClick:function(){return e.deleteImage()}}),Object(n.jsx)(j.a,{icon:b.a,className:"image-icon",name:"expand",title:"expand",onClick:function(){return e.expandImage()}})]}),Object(n.jsx)(x,{showModal:this.state.showExpandModal,image:this.urlFromDto(this.props.dto),closeModal:function(){return e.handleCloseModal()}})]})}}]),a}(c.a.Component),C=(a(113),a(49)),w=a(127),S=a(128),T=Object(s.memo)((function(e){var t=e.id,a=e.onMoveItem,n=e.children,i=Object(s.useRef)(null),r=Object(w.a)({item:{id:t,type:"IMG"},collect:function(e){return{isDragging:e.isDragging()}}}),o=Object(C.a)(r,2),l=o[0].isDragging,d=o[1],u=Object(S.a)({accept:"IMG",hover:function(e){e.id!==t&&a(e.id,t)}}),h=Object(C.a)(u,2)[1];d(i),h(i);var m={opacity:l?.5:1};return c.a.Children.map(n,(function(e){return c.a.cloneElement(e,{forwardedRef:i,style:m})}))})),M=a(69),D=a(70),E=a(46),F=a(47);function A(){var e=Object(E.a)(['\n  flex: 0 0 25%;\n  display: flex;\n  justify-content: center;\n  align-items: stretch;\n  box-sizing: border-box;\n  :before {\n    content: "";\n    display: table;\n    padding-top: 100%;\n  }\n']);return A=function(){return e},e}function z(){var e=Object(E.a)(["\n  display: flex;\n  justify-content: start;\n  flex-wrap: wrap;\n"]);return z=function(){return e},e}var B=F.a.div(z()),R=F.a.div(A()),U=function(e){var t=e.forwardedRef,a=Object(D.a)(e,["forwardedRef"]);return Object(n.jsx)(R,Object(M.a)({ref:t},a))},_=a(24);a(62);function P(e,t,a){return function(e,t,a){return a>=e.length&&(a=e.length-1),e.splice(a,0,e.splice(t,1)[0]),e}(e,t,t+a)}var Y=Object(s.createContext)({items:[]}),G=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleObserver=function(e,t){if(n.state.items.length>0){var a=e[0].boundingClientRect.y;n.state.prevY>a&&n.getItems(),n.setState({prevY:a})}},n.setItems=function(e){return n.setState({items:e})},n.deleteItem=function(e){var t=n.state.items.filter((function(t){return t.id!=e}));n.setItems(t),I.analytics.logAction("delete","User deleted an image","Image ID: ".concat(e)),Object(_.b)("Picture deleted!")},n.moveItem=function(e,t){var a=n.state.items.findIndex((function(t){return t.id===e})),s=n.state.items.findIndex((function(e){return e.id===t}));if(-1!==e&&-1!==t){var c=s-a;n.setState((function(e){return{items:P(e.items,a,c)}})),Object(_.b)("Pictures reshuffled!")}},n.getItems=Object(p.a)(m.a.mark((function e(){var t,a,s,c,i,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loading:!0}),n.state.page>1&&I.analytics.logAction("scroll","User scrolled"),t=n.props.tag,e.next=5,I.search.getItems(t,n.state.page);case 5:if(!((a=e.sent).data&&a.data.photos&&a.data.photos.photo&&a.data.photos.photo.length>0)){e.next=20;break}n.setState({page:n.state.page+1,totalItems:1==n.state.page?parseInt(a.data.photos.total):n.state.totalItems}),s=a.data.photos.photo,c=n.state.items,i=function(e){var t=s[e];if(c.filter((function(e){return e.id===t.id})).length>0)return"continue";c.push(t)},r=0;case 12:if(!(r<s.length)){e.next=19;break}if("continue"!==i(r)){e.next=16;break}return e.abrupt("continue",16);case 16:r++,e.next=12;break;case 19:n.setItems(c);case 20:case"end":return e.stop()}}),e)}))),n.state={items:[],moveItem:n.moveItem,getItems:n.getItems,deleteItem:n.deleteItem,totalItems:0,page:1,loading:!1,prevY:0},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){_.b.configure();this.observer=new IntersectionObserver(this.handleObserver.bind(this),{root:null,rootMargin:"0px",threshold:1}),this.observer.observe(this.loadingRef)}},{key:"componentDidUpdate",value:function(e){this.props.tag!==e.tag&&(this.setItems([]),this.setState({page:1,prevY:0}),this.getItems())}},{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{children:[Object(n.jsxs)(Y.Provider,{value:this.state,children:[this.props.children,this.state.loading&&this.props.tag.length>0&&Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:"Loading Images..."}),this.state.items.length>0?Object(n.jsxs)("div",{children:["Displaying [",this.state.items.length,"/",this.state.totalItems,"]"]}):Object(n.jsx)("div",{})]}),Object(n.jsx)("div",{ref:function(t){return e.loadingRef=t}})]}),Object(n.jsx)(_.a,{})]})}}]),a}(s.Component),J=Y;var L=function(){var e=Object(s.useContext)(J),t=e.items,a=e.moveItem,c=e.deleteItem,i=e.totalItems;return Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"gallery-root",children:[t.length>0?Object(n.jsxs)("div",{className:"displaying-label",children:["Displaying [",t.length,"/",i,"]"]}):Object(n.jsx)("div",{}),Object(n.jsx)(B,{children:t.map((function(e,t){return Object(n.jsx)(T,{id:e.id,onMoveItem:a,children:Object(n.jsx)(U,{children:Object(n.jsx)(N,{dto:e,index:t,handleDelete:function(e){return c(e)}},t)})},e.id)}))})]})})},H=a(68),W=a(122),q=a(129),K=a(126),Q=a(124),V=a.p+"static/media/flickrDots.83c2091a.svg",X=a.p+"static/media/sportsTag.29eb3213.jpeg",Z=a.p+"static/media/natureTag.b284df67.jpg",$=a.p+"static/media/artsTag.b1cb1170.jpeg",ee=a.p+"static/media/beachTag.23012b35.jpg",te=a.p+"static/media/background.c4c988c6.jpg",ae=a(123),ne=a(67),se=a.p+"static/media/FlickrLogo.1b4ee791.png",ce=a(125),ie=(a(116),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsxs)(ce.a,{className:"nav-bar panel fixed-top navbar-expand-sm navbar-light bg-white",children:[Object(n.jsx)("div",{className:"left-header",children:Object(n.jsx)(W.a,{className:"logo-image",src:se})}),Object(n.jsx)("div",{children:this.props.name?Object(n.jsxs)("div",{style:{display:"inline-flex"},children:[Object(n.jsx)("a",{className:"link-button search",href:"/#app-root",children:"Back To Top"}),Object(n.jsxs)("h4",{className:"name-nav-bar",children:["Welcome ",this.props.name,"!"]}),Object(n.jsx)("a",{href:"https://www.flickr.com/",target:"_blank",className:"link-button join-flickr",children:"Join the Flickr Community "})]}):Object(n.jsx)("div",{children:Object(n.jsx)("a",{href:"https://www.flickr.com/",target:"_blank",className:"link-button join-flickr",children:"Join the Flickr Community "})})})]})}}]),a}(c.a.Component)),re=new H.a,oe=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).handleSearchTagChange=function(t){var a=t.target.value;e.typingTimeout&&clearTimeout(e.typingTimeout),e.typingTimeout=setTimeout((function(){e.setState({tag:a}),I.analytics.logAction("tag","User entered new tag","Tag: ".concat(e.state.tag))}),300),e.setState({tempTag:a})},e.typingTimeout=0,e.state={tempTag:"",tag:"",name:"",inputName:""},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=re.get("name");e&&this.setState({name:e})}},{key:"handleNameInputChange",value:function(e){this.setState({inputName:e.target.value})}},{key:"handleSubmitName",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.user.setName(this.state.inputName);case 2:"success"==(t=e.sent).data.status?this.setState({name:re.get("name")}):alert("Error: ".concat(t.data.message));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(n.jsx)("div",{className:"app-root",id:"app-root",children:this.state.name?Object(n.jsxs)("div",{children:[Object(n.jsx)(ie,{name:this.state.name,tag:this.state.tag}),Object(n.jsxs)("div",{className:"app-header",style:{backgroundImage:"url(".concat(te,")")},children:[Object(n.jsx)("h2",{className:"app-title",children:"Your Flickr Inspiration"}),Object(n.jsx)("h4",{style:{fontSize:"14px"},children:"Home to tens of billions of photos and 2 million groups."}),Object(n.jsx)(W.a,{className:"logo-dots",src:V}),Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{className:"app-sub-tag",children:"Find your collection of photos. Enter a tag and your pictures will appear below!"}),Object(n.jsx)("input",{className:"app-input",onChange:function(t){return e.handleSearchTagChange(t)},value:this.state.tempTag,placeholder:"Enter keyword"})]})]}),this.state.tag.length<=0?Object(n.jsxs)("div",{className:"trending-section",children:[Object(n.jsx)("h2",{children:"Explore Trending Tags"}),Object(n.jsxs)("div",{className:"cards",children:[Object(n.jsx)(q.a,{className:"card",onClick:function(){return e.setState({tempTag:"nature",tag:"nature"})},style:{backgroundImage:"url(".concat(Z,")"),backgroundSize:"250px 150px"},children:Object(n.jsx)(q.a.Body,{children:Object(n.jsx)(q.a.Title,{className:"card-title",children:"Nature"})})}),Object(n.jsx)(q.a,{className:"card",onClick:function(){return e.setState({tempTag:"sports",tag:"sports"})},style:{backgroundImage:"url(".concat(X,")"),backgroundSize:"165px 150px"},children:Object(n.jsx)(q.a.Body,{children:Object(n.jsx)(q.a.Title,{children:"Sports"})})}),Object(n.jsx)(q.a,{className:"card",onClick:function(){return e.setState({tempTag:"arts",tag:"arts"})},style:{backgroundImage:"url(".concat($,")"),backgroundSize:"250px 150px"},children:Object(n.jsx)(q.a.Body,{children:Object(n.jsx)(q.a.Title,{children:"Arts"})})}),Object(n.jsx)(q.a,{className:"card",onClick:function(){return e.setState({tempTag:"beach",tag:"beach"})},style:{backgroundImage:"url(".concat(ee,")"),backgroundSize:"175px 150px"},children:Object(n.jsx)(q.a.Body,{children:Object(n.jsx)(q.a.Title,{children:"Beach"})})})]})]}):Object(n.jsx)("div",{}),Object(n.jsx)(ae.a,{backend:ne.a,children:Object(n.jsx)(G,{tag:this.state.tag,children:Object(n.jsx)(L,{})})})]}):Object(n.jsxs)("div",{children:[Object(n.jsx)(ie,{}),Object(n.jsxs)("div",{className:"enter-name-form",children:[Object(n.jsxs)(K.a,{children:[Object(n.jsx)(K.a.Label,{children:"Enter your name to access your Flickr Gallery:"}),Object(n.jsx)(K.a.Group,{children:Object(n.jsx)(K.a.Control,{type:"text",placeholder:"Enter name",className:"name-input",onChange:function(t){return e.handleNameInputChange(t)},value:this.state.inputName})})]}),Object(n.jsx)(Q.a,{type:"submit",className:"submit-button",onClick:function(){return e.handleSubmitName()},children:"Submit"})]})]})})}}]),a}(c.a.Component),le=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsx)("div",{className:"index",children:Object(n.jsx)(oe,{})})}}]),a}(c.a.Component);le.defaultProps={};var de=le;r.a.render(Object(n.jsx)(de,{}),document.getElementById("root"))},80:function(e,t,a){},82:function(e,t,a){},87:function(e,t,a){},95:function(e,t,a){}},[[118,1,2]]]);
//# sourceMappingURL=main.fc549f5a.chunk.js.map